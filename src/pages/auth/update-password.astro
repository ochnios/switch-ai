---
import Layout from "@/layouts/Layout.astro";
import { UpdatePasswordForm } from "@/components/auth/UpdatePasswordForm";

// Extract token from URL query parameters
const token = Astro.url.searchParams.get("token") || "";

// TODO: Add token verification on SSR level
// If token is invalid/expired, show error message or redirect
// This will be implemented when auth system is ready
---

<Layout title="Update password - switch-ai">
  {
    token ? (
      <UpdatePasswordForm token={token} client:load />
    ) : (
      <div class="flex min-h-screen items-center justify-center px-4 py-12">
        <div class="w-full max-w-md rounded-lg border border-destructive bg-card p-6 text-center">
          <h2 class="text-2xl font-bold text-destructive">Invalid Link</h2>
          <p class="mt-4 text-muted-foreground">
            This password reset link is invalid or has expired. Please request a new password reset link.
          </p>
          <a href="/auth/reset-password" class="mt-6 inline-block text-primary hover:underline">
            Request new link
          </a>
        </div>
      </div>
    )
  }
</Layout>
